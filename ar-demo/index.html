<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1, maximum-scale=1">
    <title>encantar.js WebAR demo</title>
    <script src="https://cdn.jsdelivr.net/npm/aframe@1.6.0/dist/aframe-v1.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/alemart/encantar-js@v0.4.4/dist/encantar.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/alemart/encantar-js@v0.4.4/dist/plugins/aframe-with-encantar.min.js"></script>
    <style>
        /* Reset and mobile-first approach */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000;
            font-family: Arial, sans-serif;
        }

        /* A-Frame scene full viewport */
        a-scene {
            width: 100vw !important;
            height: 100vh !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
        }

        /* AR viewport full screen */
        ar-viewport {
            width: 100% !important;
            height: 100% !important;
        }

        /* HUD responsive styling */
        ar-hud {
            width: 100% !important;
            height: 100% !important;
            position: relative !important;
        }

        #scan {
            width: 100%;
            height: 100%;
            object-fit: contain;
            opacity: 0.75;
        }

        /* Scene info overlay - responsive */
        #scene-info {
            position: absolute !important;
            top: 10px !important;
            right: 10px !important;
            background: rgba(0,0,0,0.8) !important;
            color: white !important;
            padding: 8px 12px !important;
            border-radius: 8px !important;
            font-family: Arial, sans-serif !important;
            font-size: 12px !important;
            cursor: pointer !important;
            border: 2px solid #4CAF50 !important;
            z-index: 1000 !important;
            max-width: 200px !important;
            backdrop-filter: blur(5px) !important;
        }

        /* Mobile specific adjustments */
        @media (max-width: 768px) {
            #scene-info {
                font-size: 11px !important;
                padding: 6px 10px !important;
                top: 5px !important;
                right: 5px !important;
                max-width: 180px !important;
            }
        }

        /* Portrait orientation optimization */
        @media (orientation: portrait) {
            #scene-info {
                top: 10px !important;
                right: 10px !important;
            }
        }

        /* Landscape orientation optimization */
        @media (orientation: landscape) {
            #scene-info {
                top: 5px !important;
                right: 5px !important;
            }
        }

        /* Scene switcher styling */
        #scene-switcher {
            position: absolute !important;
            bottom: 20px !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            display: flex !important;
            gap: 10px !important;
            z-index: 1000 !important;
        }

        .scene-btn {
            background: rgba(0,0,0,0.8) !important;
            color: white !important;
            border: 2px solid #4CAF50 !important;
            padding: 8px 16px !important;
            border-radius: 20px !important;
            font-family: Arial, sans-serif !important;
            font-size: 12px !important;
            cursor: pointer !important;
            backdrop-filter: blur(5px) !important;
            transition: all 0.3s ease !important;
        }

        .scene-btn:hover {
            background: rgba(76, 175, 80, 0.3) !important;
            transform: scale(1.05) !important;
        }

        .scene-btn.active {
            background: rgba(76, 175, 80, 0.8) !important;
            border-color: #81C784 !important;
        }

        @media (max-width: 768px) {
            #scene-switcher {
                bottom: 15px !important;
            }
            .scene-btn {
                font-size: 11px !important;
                padding: 6px 12px !important;
            }
        }

        /* Prevent zoom and scrolling on mobile */
        body {
            touch-action: manipulation;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
</head>
<body>
    <!-- A-Frame AR Scene -->
    <a-scene encantar="stats: true; gizmos: true; powerPreference: high-performance" loading-screen="enabled: false">

        <!-- Sources of data -->
        <ar-sources>
            <ar-camera-source></ar-camera-source> <!-- webcam -->
        </ar-sources>

        <!-- Trackers -->
        <ar-trackers>
            <ar-image-tracker>
                <ar-reference-image name="my-reference-image" src="custom-reference.png"></ar-reference-image>
            </ar-image-tracker>
        </ar-trackers>

        <!-- AR Viewport -->
        <ar-viewport>
            <ar-hud>
                <img id="scan" src="scan.png" draggable="false" style="width: 100%; height: 100%; object-fit: contain; opacity: 0.75;">
            </ar-hud>
        </ar-viewport>

        <!-- Virtual camera for AR -->
        <ar-camera></ar-camera>

        <!-- COMMENTED OUT SCENES - FOCUSING ON CRYPTOBRICK CHARACTER -->
        <!--
        <ar-root id="scene1" reference-image="my-reference-image" visible="true">
            <a-box color="yellow" position="0 0 0.5" width="1" height="1" depth="1"></a-box>
            <a-sphere color="red" position="1 0 0.5" radius="0.3"></a-sphere>
            <a-cylinder color="blue" position="-1 0 0.5" radius="0.3" height="1"></a-cylinder>
        </ar-root>

        <ar-root id="scene2" reference-image="my-reference-image" visible="false">
            <a-torus color="purple" position="0 0 0.8" radius="0.5" radius-tubular="0.1"
                     animation="property: rotation; to: 0 360 0; loop: true; dur: 4000"></a-torus>
            <a-octahedron color="orange" position="0.8 0 0.3" radius="0.3"
                          animation="property: rotation; to: 360 0 360; loop: true; dur: 3000"></a-octahedron>
            <a-tetrahedron color="green" position="-0.8 0 0.3" radius="0.3"
                           animation="property: rotation; to: 0 360 360; loop: true; dur: 2000"></a-tetrahedron>
            <a-text value="Scene 2!" position="0 -1 0.2" align="center" color="white"></a-text>
        </ar-root>

        <ar-root id="scene3" reference-image="my-reference-image" visible="false">
            <a-entity id="wave-field" quantum-wave-field></a-entity>
            <a-entity id="particle-system" advanced-particles></a-entity>
            <a-sphere id="morph-sphere" position="0 0 0.5" radius="0.3"
                      color="#FF6B6B" morphing-geometry></a-sphere>
            <a-text value="QUANTUM FIELD" position="0 -1.2 0" align="center"
                    color="cyan" reactive-text></a-text>
        </ar-root>

        <ar-root id="scene4" reference-image="my-reference-image" visible="false">
            <a-gltf-model id="user-model" src="model.glb"
                          position="0 0 0.5"
                          scale="0.5 0.5 0.5"
                          animation="property: rotation; to: 0 360 0; loop: true; dur: 4000"
                          shadow="cast: true; receive: true">
            </a-gltf-model>
            <a-light type="ambient" color="#ffffff" intensity="0.6"></a-light>
            <a-light type="directional" position="2 4 2" color="#ffffff" intensity="0.8"></a-light>
            <a-text value="YOUR 3D MODEL!" position="0 -1 0" align="center"
                    color="#FFD700" font="kelsonsans"></a-text>
        </ar-root>
        -->

        <!-- MAIN AR SCENE - FACE MODEL -->
        <ar-root id="main-scene" reference-image="my-reference-image" visible="true">
            <!-- Face Model -->
            <a-gltf-model id="face-model"
                          src="base_basic_shaded.glb"
                          position="0 -1 0"
                          scale="1 1 1"
                          animation="property: rotation; to: 0 360 0; loop: true; dur: 5000"
                          shadow="cast: true; receive: true">
            </a-gltf-model>

            <!-- Professional lighting setup -->
            <a-light type="ambient" color="#ffffff" intensity="0.8"></a-light>
            <a-light type="directional" position="2 4 2" color="#ffffff" intensity="1.0" shadow="cast: true"></a-light>
            <a-light type="point" position="-1 2 1" color="#4CAF50" intensity="0.3"></a-light>
            <a-light type="point" position="1 2 1" color="#2196F3" intensity="0.3"></a-light>
        </ar-root>

    </a-scene>

    <script>
        // SINGLE SCENE AR DEMO - FACE MODEL

        console.log('ðŸŽ­ AR FACE MODEL LOADED!');
        console.log('ðŸ“· Point your camera at the reference marker to see the 3D face model!');
        console.log('ðŸŽ¨ Model will rotate automatically for a full 360Â° view!');
    </script>
</body>
</html>
